<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:Maui.Controls.Sample"
             x:Class="Maui.Controls.Sample.CarouselViewControlPage"
             Title="CarouselViewControlPage">
    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Options"
                     Clicked="NavigateToOptionsPage_Clicked"
                     AutomationId="Options"/>
    </ContentPage.ToolbarItems>
    <Grid Padding="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <HorizontalStackLayout Grid.Row="0"
                Grid.ColumnSpan="2"
                Spacing="40"
                Padding="40"
                VerticalOptions="Center"
                HorizontalOptions="Center">
            <Button Text="Add"
                    Command="{Binding AddItemCommand}"
                    IsVisible="{Binding ShowAddRemoveButtons}"
                    WidthRequest="150"
                    AutomationId="AddButton"/>
        </HorizontalStackLayout>
        <local:CarouselView2 Grid.Row="1"
                Grid.ColumnSpan="2"
                             x:Name="carouselView"
                             ItemsSource="{Binding ItemsSource}"
                             EmptyView="{Binding EmptyView}"
                             EmptyViewTemplate="{Binding EmptyViewTemplate}"
                             ItemTemplate="{Binding ItemTemplate}"
                             Loop="{Binding Loop}"
                             IsSwipeEnabled="{Binding IsSwipeEnabled}"
                             PeekAreaInsets="{Binding PeekAreaInsets}"
                             Position="{Binding Position}"
                             CurrentItem="{Binding CurrentItem}"
                             CurrentItemChanged="OnCarouselView_CurrentItemChanged" 
                             PositionChanged="OnCarouselView_PositionChanged"                        
                             HorizontalScrollBarVisibility="{Binding HorizontalScrollBarVisibility}"
                             VerticalScrollBarVisibility="{Binding VerticalScrollBarVisibility}"
                             ItemsUpdatingScrollMode="{Binding ItemsUpdatingScrollMode}"
                             IndicatorView="{x:Reference indicatorView}"
                             ItemsLayout="{Binding ItemsLayout}"
                             AutomationId="CarouselViewControl">
        </local:CarouselView2>

        <IndicatorView
            x:Name="indicatorView"
            Grid.Row="2"
            Grid.ColumnSpan="2"
            HorizontalOptions="Center"
            VerticalOptions="End"
            Margin="0,0,0,20"
            IndicatorColor="LightGray"
            SelectedIndicatorColor="DarkGray"
            IndicatorSize="12"/>

        <Label Grid.Row="3"
               Grid.Column="0"
                FontAttributes="Bold"
               Text="Current Item:"/>
        <Label Grid.Row="3"
               Grid.Column="1"
               Text="{Binding CurrentItemText}"
               AutomationId="CurrentItemLabel"
               TextColor="Blue"/>

        <Label Grid.Row="4"
               Grid.Column="0"
                FontAttributes="Bold"
               Text="Previous Item:"/>
        <Label Grid.Row="4"
               Grid.Column="1"
               TextColor="Blue"
               Text="{Binding PreviousItemText}"
               AutomationId="PreviousItemLabel"/>

        <Label Grid.Row="5"
               Grid.Column="0"
                FontAttributes="Bold"
               Text="Current Position:"/>
        <Label Grid.Row="5"
               Grid.Column="1"
               TextColor="Blue"
               Text="{Binding Position}"
               AutomationId="CurrentPositionLabel"/>

        <Label Grid.Row="6"
                Grid.Column="0"
                FontAttributes="Bold"
                Text="Previous Position:"
                AutomationId="PreviousPositionLabel"/>
        <Label Grid.Row="6"
                Grid.Column="1"
                TextColor="Blue"
                Text="{Binding PreviousItemPosition}"
                AutomationId="PreviousPositionLabelValue"/>
    </Grid>
</ContentPage>